function ResponsiveDatatablesHelper(e,t,s){this.tableElement="string"==typeof e?jQuery(e):e,this.columnIndexes=[],this.columnsShownIndexes=[],this.columnsHiddenIndexes=[],this.expandColumn=void 0,this.origBreakpointsDefs=void 0,this.breakpoints={},this.options={hideEmptyColumnsInRowDetail:!1,clickOn:"icon"},this.expandIconTemplate='<span class="responsiveExpander"></span>',this.rowTemplate='<tr class="row-detail"><td><ul><!--column item--></ul></td></tr>',this.rowLiTemplate='<li><span class="columnTitle"><!--column title--></span>: <span class="columnValue"><!--column value--></span></li>',this.disabled=!0,this.skipNextWindowsWidthChange=!1,this.init(t,s)}ResponsiveDatatablesHelper.prototype.init=function(e,t){this.origBreakpointsDefs=e,this.initBreakpoints(),this.disable(!1),_.extend(this.options,t)},ResponsiveDatatablesHelper.prototype.initBreakpoints=function(){this.origBreakpointsDefs.always=1/0;var e=[];_.each(this.origBreakpointsDefs,function(t,s){e.push({name:s,upperLimit:t,columnsToHide:[]})}),e=_.sortBy(e,"upperLimit");var t=void 0;_.each(e,function(e){e.lowerLimit=t,t=e.upperLimit}),e.push({name:"default",lowerLimit:t,upperLimit:void 0,columnsToHide:[]}),this.breakpoints={};for(var s=0,n=e.length;n>s;s++)this.breakpoints[e[s].name]=e[s];this.columnIndexes=[];for(var i=this.tableElement.fnSettings().aoColumns,s=0,n=i.length;n>s;s++)i[s].bVisible&&this.columnIndexes.push(s);var o=this.tableElement.fnSettings().aoColumns;o=_.filter(o,function(e){return e.bVisible}),_.each(o,function(e,t){"expand"===jQuery(e.nTh).attr("data-class")&&(this.expandColumn=this.columnIndexes[t]);var s=jQuery(e.nTh).attr("data-hide");if(void 0!==s){var n=s.split(/,\s*/);_.each(n,function(e){"always"===e?_.each(this.breakpoints,function(e,s){"default"!==s&&e.columnsToHide.push(this.columnIndexes[t])},this):void 0!==this.breakpoints[e]&&this.breakpoints[e].columnsToHide.push(this.columnIndexes[t])},this)}},this)},ResponsiveDatatablesHelper.prototype.setWindowsResizeHandler=function(e){if(void 0===e&&(e=!0),e){var t=this;jQuery(window).bind("resize",function(){t.respond()})}else jQuery(window).unbind("resize")},ResponsiveDatatablesHelper.prototype.respond=function(){if(!this.disabled){var e=this,t=jQuery(window).width(),s=0,n=[];_.each(this.breakpoints,function(e){(!e.lowerLimit||t>e.lowerLimit)&&(!e.upperLimit||t<=e.upperLimit)&&(n=e.columnsToHide)},this);var i=!1;if(!this.skipNextWindowsWidthChange)if(this.columnsHiddenIndexes.length!==n.length)i=!0;else{var o=_.difference(this.columnsHiddenIndexes,n).length,a=_.difference(n,this.columnsHiddenIndexes).length;i=o+a>0}i&&(this.skipNextWindowsWidthChange=!0,this.columnsHiddenIndexes=n,this.columnsShownIndexes=_.difference(this.columnIndexes,this.columnsHiddenIndexes),this.showHideColumns(),s=this.columnsHiddenIndexes.length,this.skipNextWindowsWidthChange=!1),this.columnsHiddenIndexes.length?(this.tableElement.addClass("has-columns-hidden"),jQuery("tr.detail-show",this.tableElement).each(function(t,s){var n=jQuery(s);0===n.next(".row-detail").length&&ResponsiveDatatablesHelper.prototype.showRowDetail(e,n)})):(this.tableElement.removeClass("has-columns-hidden"),jQuery("tr.row-detail").each(function(){ResponsiveDatatablesHelper.prototype.hideRowDetail(e,jQuery(this).prev())}))}},ResponsiveDatatablesHelper.prototype.showHideColumns=function(){for(var e=0,t=this.columnsShownIndexes.length;t>e;e++)this.tableElement.fnSetColumnVis(this.columnsShownIndexes[e],!0,!1);for(var e=0,t=this.columnsHiddenIndexes.length;t>e;e++)this.tableElement.fnSetColumnVis(this.columnsHiddenIndexes[e],!1,!1);var s=this;jQuery("tr.row-detail").each(function(){ResponsiveDatatablesHelper.prototype.hideRowDetail(s,jQuery(this).prev())}),this.tableElement.hasClass("has-columns-hidden")&&jQuery("tr.detail-show",this.tableElement).each(function(e,t){ResponsiveDatatablesHelper.prototype.showRowDetail(s,jQuery(t))})},ResponsiveDatatablesHelper.prototype.createExpandIcon=function(e){if(!this.disabled)for(var t=jQuery("td",e),s=0,n=t.length;n>s;s++){var i=t[s],o=this.tableElement.fnGetPosition(i)[2];if(i=jQuery(i),o===this.expandColumn){if(0==jQuery("span.responsiveExpander",i).length)switch(i.prepend(this.expandIconTemplate),this.options.clickOn){case"cell":i.on("click",{responsiveDatatablesHelperInstance:this},this.showRowDetailEventHandler);break;case"row":jQuery(e).on("click",{responsiveDatatablesHelperInstance:this},this.showRowDetailEventHandler);break;default:i.on("click","span.responsiveExpander",{responsiveDatatablesHelperInstance:this},this.showRowDetailEventHandler)}break}}},ResponsiveDatatablesHelper.prototype.showRowDetailEventHandler=function(e){var t=e.data.responsiveDatatablesHelperInstance;if(!t.disabled){var s=jQuery(this);if(s.closest("table").hasClass("has-columns-hidden")){var n=s.closest("tr");n.hasClass("detail-show")?ResponsiveDatatablesHelper.prototype.hideRowDetail(t,n):ResponsiveDatatablesHelper.prototype.showRowDetail(t,n),n.toggleClass("detail-show"),e.stopPropagation()}}},ResponsiveDatatablesHelper.prototype.showRowDetail=function(e,t){var s=e.tableElement,n=s.fnSettings().aoColumns,i=jQuery(e.rowTemplate),o=jQuery("ul",i);_.each(e.columnsHiddenIndexes,function(i){var a=s.fnGetPosition(t[0]),l=s.fnGetTds(a)[i];if(!e.options.hideEmptyColumnsInRowDetail||l.innerHTML.trim().length){var r=jQuery(e.rowLiTemplate);jQuery(".columnTitle",r).html(n[i].sTitle);var d=jQuery(l).contents().clone();jQuery(".columnValue",r).html(d),r.attr("data-column",i);var h=jQuery(l).attr("class");"undefined"!==h&&h!==!1&&""!==h&&r.addClass(h),o.append(r)}});var a=e.columnIndexes.length-e.columnsHiddenIndexes.length;i.find("> td").attr("colspan",a),t.after(i)},ResponsiveDatatablesHelper.prototype.hideRowDetail=function(e,t){t.next(".row-detail").find("li").each(function(){var s=e.tableElement,n=s.fnSettings().aoData,i=s.fnGetPosition(t[0]),o=jQuery(this).attr("data-column"),a=jQuery(this).find("span.columnValue").contents();n[i]._anHidden[o]=jQuery(n[i]._anHidden[o]).empty().append(a)[0]}),t.next(".row-detail").remove()},ResponsiveDatatablesHelper.prototype.disable=function(e){this.disabled=void 0===e||e,this.disabled?(this.setWindowsResizeHandler(!1),jQuery("tbody tr.row-detail",this.tableElement).remove(),jQuery("tbody tr",this.tableElement).removeClass("detail-show"),jQuery("tbody tr span.responsiveExpander",this.tableElement).remove(),this.columnsHiddenIndexes=[],this.columnsShownIndexes=this.columnIndexes,this.showHideColumns(),this.tableElement.removeClass("has-columns-hidden"),this.tableElement.off("click","span.responsiveExpander",this.showRowDetailEventHandler)):this.setWindowsResizeHandler()},jQuery.fn.dataTableExt.oApi.fnGetTds=function(e,t){var s,n,i,o=[],a=[],l=0,r="object"==typeof t?e.oApi._fnNodeToDataIndex(e,t):t,d=e.aoData[r].nTr;for(n=0,i=d.childNodes.length;i>n;n++)s=d.childNodes[n],"TD"==s.nodeName.toUpperCase()&&a.push(s);for(n=0,i=e.aoColumns.length;i>n;n++)e.aoColumns[n].bVisible?o.push(a[n-l]):(o.push(e.aoData[r]._anHidden[n]),l++);return o};